<link rel="stylesheet" href="libs/flatpickr.min.css">
<script src="libs/flatpickr.min.js"></script>

<div class="booking-page-container">
    <div class="booking-header-toolbar">
        <button class="back-btn" onclick="window.loadContentPage('Room', 'Room')">
            <i class="fa-solid fa-arrow-left"></i> Quay lại
        </button>
        <h2 id="bookingPageTitle">Quản lý đặt phòng: <span id="currentRoomName">--</span></h2>
    </div>

    <div class="booking-content">
        <div class="form-container">
            <h3 class="form-title">Thông tin Khách hàng & Đặt phòng</h3>
            
            <div class="form-group">
                <label for="customerName">Tên khách hàng (*)</label>
                <input type="text" id="customerName" placeholder="Nhập tên khách hàng" required>
            </div>

            <div class="form-group">
                <label for="phoneNumber">Số điện thoại (*)</label>
                <input type="tel" id="phoneNumber" placeholder="Nhập SĐT" required>
            </div>
            
            <div class="form-group">
                <label for="customerQuantity">Số lượng khách</label>
                <input type="number" id="customerQuantity" value="2" min="1" max="50">
            </div>
                <div class="form-group">
               <label for="startDate">Ngày đặt phòng (*)</label>
             <div class="date-picker-wrapper">
            <input type="date" id="startDate" required>
             <button type="button" id="calendarBtn" class="calendar-btn">
            <i class="fa-solid fa-calendar-days"></i>
             </button>
             </div>
            </div>


            <div class="form-row">
                <div class="form-group time-group">
                    <label for="startTime">Giờ bắt đầu (*)</label>
                    <input type="time" id="startTime" required>
                </div>

                <div class="form-group time-group">
                    <label for="endTime">Giờ kết thúc (*)</label>
                    <input type="time" id="endTime" required>
                </div>
            </div>

            <p class="warning-message" id="timeWarning"></p>

            <div class="form-group">
                <label for="deposit">Tiền cọc (VNĐ)</label>
                <input type="number" id="deposit" value="0" min="0">
            </div>

            <div class="form-actions">
                <button id="btnConfirmBooking" class="action-btn primary-btn">
                    <i class="fa-solid fa-check"></i> Xác nhận & Mở phòng
                </button>
                <button id="btnCancelBooking" class="action-btn secondary-btn">
                    <i class="fa-solid fa-xmark"></i> Hủy
                </button>
            </div>
        </div>
    </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const dateInput = document.getElementById("startDate");
  const calendarBtn = document.getElementById("calendarBtn");

  // ⚙️ Khởi tạo Flatpickr trên button, gắn với input type="date"
  const fp = flatpickr(calendarBtn, {
    dateFormat: "Y-m-d",
    allowInput: true,
    altInput: true,
    altFormat: "d/m/Y",
    clickOpens: false, // không tự mở khi focus
    onChange: function(selectedDates, dateStr) {
      // Ghi giá trị ISO (yyyy-mm-dd) vào input type="date"
      dateInput.value = dateStr;
    },
  });

  // Khi click icon → mở lịch
  calendarBtn.addEventListener("click", () => fp.open());

  // Khi người dùng tự nhập bằng bàn phím → cập nhật lịch
  dateInput.addEventListener("change", () => {
    fp.setDate(dateInput.value);
  });
});
</script>

